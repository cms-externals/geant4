
                       geant4-10-02-ref-07
                       ===================

Major development/fixes included since the last development tag are:

 o Extended and improved current implementation of parameters in analysis
   module.
 o Particle gun can now shoot ions with floating level base.
 o Updated floating level base for G4Ions, G4IonTable and related classes.
 o Correction in G4UniversalFluctuation in order to reduce step dependence.
 o Added new methods and UI commands to define optional EM physics per region.
 o Added new GEM model and removed old photon-evaporation classes and
   obsolete interfaces.
 o First implementation of eta meson production in INCL++ hadronic model.
 o Updated data set G4EMLOW-6.49.

---------- Reference-tag 'Release Notes' -----------

(*)  Fixes included in release 10.2.p03

Summarised, the list of changes is the following:

cmake                                            cmake-V10-02-18
-----
- Updated to data set G4EMLOW-6.49.

analysis                                         analysis-V10-02-08
--------
- Extended and improved current implementation of parameters: parameters
  names are optional; extended merge mode with kMaximum, kMinimum and
  removed kUser (not needed anymore); added access to paremeters via
  iterators and ids (defined by the order of registering); introduced
  G4MergeFunction<T> type and apply merging via a function defined according
  to the merge mode.
- Use of nullptr and return 0. when the return type is double.

event                                            event-V10-02-07
-----
- Particle gun now can shoot ions with floating level base.
- Modified G4AdjointStackingAction for the implementation of splitting
  in reverse MC tracking.

externals                                        externals-V10-02-10
---------
- CLHEP: corrected value of SPECIALMUL in MixMax to correspond to exact
  formula for N=17 (m=2^36+1).

geometry
--------
- management (geommng-V10-02-17):
  o Optimised version of G4BoundingEnvelope.
  o Removed redundant check in G4GeomSplitter::UseWorkArea().                (*)
    Addressing problem report #1876.
- navigation (geomnav-V10-02-10):                                            (*)
  o Fix in G4Navigator::GetGlobalExitNormal() to synchronise caching of
    'fExitNormalGlobalFrame' before returning.
    Addressing problem report #1750.
  o More diagnostics in G4VERBOSE mode in G4Navigator::GetGlobalExitNormal().
- solids/Boolean (geom-bool-V10-02-09):
  o Removed tolerance argument to call to G4BoundingEnvelope in
    G4ScaledSolid::CalculateExtent().
- solids/specific (geom-specific-V10-02-12):
  o Fixed minor typo in function Create() for G4Polycone, G4Polyhedra and    (*)
    G4GenericPolycone.
    Fixed minor typos in G4GenericTrap::SurfaceNormal() and
    G4VTwistSurface::CurrentStatus::ResetfDone().
    Issues detected by PVS-Studio static code analyzer.
    Addressing problem report #1876.

global                                           global-V10-02-22
------
- Fix in G4UnitsTable and G4UnitDefinition to be properly shared by all
  threads. Addressing problem report #1869.
- G4UnitsTable: use 'hep_pascal' instead of 'pascal' to avoid potential      (*)
  symbol conflicts on Windows.
- G4PhysicsVector, G4PhysicsTable and derived classes: general cleanup.
  Removed duplicate methods; more correct names for some variables; adoption
  of c++11 keywords; updated comments; removed unnecessary files.

graphics_reps                                    greps-V10-02-03
-------------
- G4VisAttributes: added flag to force auxiliary edge visibility, i.e., to
  record if the user has asked for forcing; introduced default argument 'true'
  for SetVisibility(), SetDaughtersInvisible(), SetForceWireframe(),
  SetForceSolid() and SetForceAuxEdgeVisible(); improved logic for setting
  force drawing style and auxiliary edge visibility; moved above methods and
  static metohds to be non inline.
- G4VisAttributes::GetInvisible(): changed to use a static instance instead  (*)
  of G4VisAttributes::Invisible; moved implementation to be not inline.
- G4VisAttributes::Invisible: deprecated.                                    (*)

intercoms                                        intercoms-V10-02-04
---------
- G4UIcontrolMessenger: added new commands strif, strdoif, ifBatch, 
  ifInteractive, doifBatch and doifInteractive.
  Improved command "/control/getVal".

parameterisations/gflash                         gflash-V10-02-01
------------------------
- Removed redundant condition in GFlashHitMaker::make().                     (*)
  Addressing problem report #1876.

particles                                        particles-V10-02-20
---------
- Fix G4DynamicParticle in case that difference between the PDG mass and
  dynamical mass is very small (<10 eV).
- Skip check of daughter mass and parent mass in case of one body decay
  in G4VDecayChannel::FillDaughters().
  Skip check for one body decay in G4VDecayChannel::IsOKWithParentMass().
- Updated floating level base for G4Ions, G4IonTable and related classes.
  Ground-level ion with floating level base now has a name with its floating
  level base.
- Minor Fix for G4PhaseSpaceDecayChannel.
- Removed redundant check in G4PDefSplitter::UseWorkArea().                  (*)
  Addressing problem report #1876.

persistency/gdml                                 gdml-V10-02-07
----------------
- Fixed check for correctness of the units for divisions along angular axis. (*)

persistency/mctruth                              mctruth-V10-02-00           (*)
-------------------
- Fixed typo in G4PersistencyCenterMessenger::GetCurrentValue() in
  selection of verbose mode. Addressing problem report #1876.

physics_lists
-------------
- constructors/electromagnetic (phys-ctor-em-V10-02-25)  
  o In all EM builders only one explicit constructor is left.
  o Livermore and Penelope physics defined below 1 TeV (default 100 TeV).
    Opt3, Livermore and Penelope enable sampling of lateral displacement 
    for hadrons.
  o G4EmModelActivator: simplified interface, removed not needed methods.
  o G4EmDNAPhysicsActivator: new class for DNA models configuration.
    Introduced new methods for DNA configuration per particle type.
    G4EmModelActivator: take out DNA physics and move it to the new
    class G4EmDNAPhysicsActivator.
- constructors/limiters (phys-ctor-limiters-V10-02-01)                               (*)
  o G4StepLimiterPhysics: added option which allows to apply the step limit
    to all particles (by default the step limit is applied to charged particles
    only).

processes/electromagnetic/dna                    emdna-V10-02-26
-----------------------------
- Added stationary mode to sub-excitation electron processes.
- G4Scheduler: moved G4IosFlagsSaver to Process().

processes/electromagnetic/lowenergy              emlowen-V10-02-08           (*)
-----------------------------------
- Removed verbosity in G4AtomicTransitionManager.
  Addressing problem report #1874.
- Fixed typo in G4hParameterisedLossModel.
  Addressing problem report #1876.

processes/electromagnetic/standard               emstand-V10-02-27
----------------------------------
- G4ScreeningMottCrossSection: fixed precision lost in relativistic
  kinematics when E > 30 TeV.
- G4UniversalFluctuation: correction in order to reduce step dependence.
- G4SeltzerBergerModel, G4eBremsstrahlungRelModel, G4eBremParametrizedModel:
  added C++11 keywords explicit, override, delete; use nullptr and use
  G4Element::GetZasInt().
- G4WentzelOKandVIxSection: added various format factor approximations.
- G4eBremsstrahlungRelModel: removed unused variables.
- G4eBremsstrahlung: improved printout.

processes/electromagnetic/utils                  emutils-V10-02-27
-------------------------------
- G4EmParameters, G4VEmProcess, G4VEnergyLossProcess: default upper energy
  limits are extended from 10 TeV to 100 TeV.
- G4EmParameters, G4EmParametersMessenger: added new methods and UI commands
  to define optional EM physics per region.
- G4EmBiasingManager: fixed issue reported by PVS-Studio.                    (*)
  Addressing problem report #1876.

processes/electromagnetic/xrays                  xrays-V10-02-05
-------------------------------
- Added stacking flag to G4Scintillation and G4Cerenkov and new
  GetNumPhotons() method.

processes/hadronic
------------------
- cross_sections (hadr-cross-V10-02-04)
  o G4ComponentGGHadronNucleusXsc: added two new fields to be used by final
    string generators.
  o G4CrossSectionDataSetRegistry: removed termination trick from ParticleHP
    models introduced in previous release.
  o G4VCrossSectionDataSet, G4CrossSectionDataStore: fixed minor Coverity
    report.
  o G4CrossSectionDataStore: added "throw" to hadronic exception; minor
    optimisation in G4ComponentGGHadronNucleusXsc and G4ComponentGGNuclNuclXsc.
    Addressing problem report #1876.
- management (hadr-man-V10-02-03)
  o G4HadronicProcess: added check on the final-state secondaries to see
    if kaon0 or anti_kaon0 are present: if this the case, they are transformed
    into either kaon0S or kaon0L, with equal (50%) probability.
  o G4EnergyRangeManager: fixed Coverity defect.
- models/coherent_elastic (hadr-cohe-V10-02-01)
  o G4hhElastic: fixed wrong pointer initialization.
  o G4NuclNuclDiffuseElastic: comment out redundant if-statement.
    Addressing problem report #1876.
- models/de_excitation (hadr-deex-V10-02-44)
  o G4VEvaporationChannel, G4Evaporation, G4UnstableFragmentBreakUp:
    implemented improved mechanism of decay of exotic fragments by
    G4Evaporation (very biased number of protons and neutrons).
  o Added new GEM model G4GEMChannelVI; use model in G4EvaporationGEMFactoryVI.
  o G4ExcitationHandler, G4Evaporation, G4DeexPrecoParameters: improved
    names and initialisation of set of de-excitation channels.
  o Removed G4PhotonEvaporationOLD and all associated classes.
    Removed obsolete interfaces in G4VEvaporationChannel, G4VEvaporation,
    G4VFermiBreakUp and derived classes 
  o G4FermiBreakUpVI, G4FermiFragmentsPoolVI, G4FermiPair, G4FermiFragment,
    G4FermiDecayProbability, G4FermiChannels: new classes for new Fermi
    BreakUp model, fully based on nuclear level structure DB.
    Enabled new model by default in G4ExcitationHandler and G4Evaporation.
  o Protect G4DeexPrecoParameters::Dump() to print the parameters only
    in the master thread.
- models/inclxx (hadr-inclxx-V10-02-01)
  o INCL++ v5.3_rc5: first implementation of eta meson production.
  o Few minor fixes.
- models/lepto_nuclear (hadr-lepnuc-V10-02-00)
  o Added missing dependency to de_excitation/management in GNUmakefile.
- models/particle_hp (hadr-hpp-V10-02-23)
  o G4ParticleHPPhotonDist: added missing protection against null pointer;
    G4ParticleHPLabAngularEnergy: removed redundant if-statement;
    G4ParticleHPThermalScattering: added missing throw statements.
    Addressing problem report #1876.
  o Fixed Coverity defects.
- models/parton_string/diffraction (hadr-string-diff-V10-02-07)
  o Fine tuning of G4FTFParameters.
  o Set back Pt of nucleon involved in the reggeon cascade to its original
    values. Attempts to improve proton spectra in p+C at 158 GeV/c were not
    successful.
  o Cleanup in G4DiffractiveExcitation.
- models/radioactive_decay (radioactive_decay-V10-02-08)
  o G4NuclearDecayChannel, G4RadioactiveDecay, G4RadioactiveDecaymessenger:
    switch to use new gamma level data.
- models/util (hadr-mod-util-V10-02-07)
  o G4KineticTrack: improved decay part by checking whether the sampled decay
    channel is kinematically below threshold; if this is so, then the sampling
    is repeated (but no more than a max number of trials).
  o G4GeneralPhaseSpaceDecay: added "throw" to hadronic exception.
    Addressing problem report #1876.

run                                              run-V10-02-21
---
- Modified G4AdjointSimManager, G4AdjointPrimaryGeneratorAction and
  G4AdjointSimMessenger for the implementation of splitting in reverse MC
  tracking.
- Fixed initialisation of G4UnitsTable and G4UnitDefinition to be properly
  shared by all threads. Addressing problem report #1869.
- Removed redundant check in G4VUPLSplitter::UseWorkArea().                  (*)
  Addressing problem report #1876.
- G4WorkerRunManager: minor printout improvement.                            (*)

tracking                                         tracking-V10-02-03
--------
- Modified G4AdjointTrackingAction and G4AdjointSteppingAction for the
  implementation of splitting in reverse MC tracking.

visualization                                    vis-V10-02-08
-------------
- management (visman-V10-02-19):
  o Taking account of new flag 'IsForceDrawingStyle'.
  o Changed defaults of some command parameters to reflect obvious meaning
    in the command name.
  o Minor improvements to scale and axes.
- modeling (modeling-V10-02-07):
  o Replaced TouchedVolume by EncounteredVolume in trajectory drawing and
    filtering. Functionally identical.
  o Taking account of new flag 'IsForceDrawingStyle'.
  o Improved safety. Improved comments.
- OpenGL (opengl-V10-02-09):
  o Fixed compilation warning on Win64.                                      (*)
  o Improved comments.
- Tree (vistree-V10-02-01):
  o Changed default verbosity to 1 (shows logical volume names).

data sets:
---------
- G4EMLOW-6.48:
  o Added epics2014 files to 'livermore' module.

examples                                         examples-V10-02-07
--------
- Updated documentation and reference outputs.
- extended/analysis/AnaEx01 (AnaEx01-V10-02-01)
- extended/analysis/AnaEx02 (AnaEx02-V10-02-01)
- extended/analysis/AnaEx03 (AnaEx03-V10-02-01)
- extended/analysis/shared (analysisShared-V10-02-01)
- extended/biasing (exbiasing-V10-02-00)
- extended/common (excommon-V10-02-01)
- extended/electromagnetic/TestEm0 (testem0-V10-02-03)
- extended/electromagnetic/TestEm1 (testem1-V10-02-06)
- extended/electromagnetic/TestEm2 (testem2-V10-02-03)
- extended/electromagnetic/TestEm3 (testem3-V10-02-05)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/electromagnetic/TestEm4 (testem4-V10-02-03)
  o Modified EventAction, adding call to AddEdep().
  o Fixes for Doxygen documentation and coding guidelines.
- extended/electromagnetic/TestEm5 (testem5-V10-02-05)
- extended/electromagnetic/TestEm6 (testem6-V10-02-01)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/electromagnetic/TestEm7 (testem7-V10-02-02)
  o Fix in c2_functions.
  o Fixes for Doxygen documentation.
- extended/electromagnetic/TestEm8 (testem8-V10-02-01)
- extended/electromagnetic/TestEm9 (testem9-V10-02-00)
- extended/electromagnetic/TestEm10 (testem10-V10-02-01)
- extended/electromagnetic/TestEm11 (testem11-V10-02-07)
- extended/electromagnetic/TestEm12 (testem12-V10-02-03)
- extended/electromagnetic/TestEm13 (testem13-V10-02-02)
- extended/electromagnetic/TestEm14 (testem14-V10-02-02)
- extended/electromagnetic/TestEm15 (testem15-V10-02-01)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/electromagnetic/TestEm16 (testem16-V10-02-02)
  o Added gui buttons and icons.mac, gui.mac macros.
  o Fixes for Doxygen documentation.
- extended/electromagnetic/TestEm17 (testem17-V10-02-01)
- extended/electromagnetic/TestEm18 (testem18-V10-02-02)
- extended/eventgenerator/exgps (exgps-V10-02-00)
- extended/eventgenerator/particleGun (particleGunExample-V10-02-01)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/eventgenerator/pythia/decayer6 (p6decayer-V10-02-03)
  o Adding extern keyword to data declarations to fix problem on MacOS.
  o Fixes for Doxygen documentation and coding guidelines.
- extended/eventgenerator/userPrimaryGenerator (userPrimaryGenerator-V10-02-00)
  o Fixes for Doxygen documentation.
- extended/exoticphysics/phonon (phononExample-V10-02-06)
  o Avoid setting random seed in run.in to allow for reproducible output files.
  o Added clang/icc specific references and switch depending on compiler.
    Corrected selection of caustic reference on MacOS in MT mode; set compiler
    ID to AppleClang on Mac.
- extended/exoticphysics/ucn (ExUCN-V10-02-00)
  o Updated output files.
- extended/field/field02 (fieldex02-V10-02-01)
  o Fixes for Doxygen documentation.
- extended/field/field03 (fieldex03-V10-02-02)
  o Replaced F03PhysicsList with FTFP_BERT with G4StepLimiterPhysics.
  o Fixes for Doxygen documentation.
- extended/field/field05 (fieldex05-V10-02-00)
  o Replaced F05ExtraPhysics with use of G4StepLimiterPhysics.
- extended/field/field06 (fieldex06-V10-02-01)
  o Replaced F06ExtraPhysics with use of G4StepLimiterPhysics; apply step
    limiter process to all particles by calling the new function
    G4StepLimiterPhysics::SetApplyToAll(). Code cleanup.
- extended/g3tog4 (g3tog4Tests-V10-02-01)
- extended/geometry/transforms (exTransforms-V10-02-00)
- extended/hadronic (exHadronic-V10-02-01)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/hadronic/Hadr03 (exhadr03-V10-02-01)
  o PhysicsList: removed obsolete G4HadronElasticPhysicsPHP;
    added particleHP constructors.
- extended/hadronic/Hadr04 (exhadr04-V10-02-00)
- extended/hadronic/Hadr06 (exhadr06-V10-02-02)
  o DetectorConstruction: added HeavyWater description.
- extended/hadronic/Hadr07 (exhadr07-V10-02-03)
  o Fixed local EM physics-list.
- extended/medical/DICOM (DICOM-V10-02-00)
  o Fixed coding guidelines.
- extended/medical/dna/chem1 (chem1-V10-02-01)
- extended/medical/dna/chem2 (chem2-V10-02-01)
- extended/medical/dna/chem3 (chem3-V10-02-01)
- extended/medical/dna/clustering (clustering-V10-02-02)
  o Fixes for Doxygen documentation.
- extended/medical/dna/dnaphysics (dnaphysics-V10-02-04)
  o PhysicsList: use G4EmDNAPhysicsActivator.
  o Updated README.
- extended/medical/dna/microdosimetry (microdosimetry-V10-02-03)
  o Fixes for Doxygen documentation.
- extended/medical/dna/microyz            microyz-V10-02-00)
  o Updated README.
- extended/medical/dna/pdb4dna (pdb4dna-V10-02-02)
  o Fixed compilation warnings on gcc-6.1.
  o Fixes for Doxygen documentation.
- extended/medical/dna/range (range-V10-02-02)
  o Added positron test in TrackingAction.
  o Updated README.
- extended/medical/dna/svalue (svalue-V10-02-04)
  o Added plot.C macro.
  o Fixes for Doxygen documentation.
- extended/medical/dna/wholeNuclearDNA (wholeNuclearDNA-V10-02-01)
  o Fixes for Doxygen documentation.
- extended/medical/dna/wvalue (wvalue-V10-02-02)
  o Updated PhysicsList.
  o Fixes for Doxygen documentation.
- extended/medical/electronScattering (electronScattering-V10-02-02)
  o Fixes for Doxygen documentation.
- extended/medical/fanoCavity (fano-V10-02-01)
- extended/medical/fanoCavity2 (fano2-V10-02-00)
- extended/optical/LXe (LXe-V10-02-00)
- extended/parallel/MPI (MPI-V10-02-01)
- extended/parallel/ThreadsafeScorers (ThreadsafeScorers-V10-02-03)
- extended/parameterisations/gflash (exgflash-V10-02-00)
  o Fixes for Doxygen documentation and coding guidelines.
- extended/persistency/gdml/G01 (G01-V10-02-02)
  o Replaced std::cout with G4cout.
- extended/persistency/P01 (exampleP01-V10-02-00)
- extended/polarisation/Pol01 (expol01-V10-02-02)
  o Fixed coding guidelines.
- extended/radioactivedecay (exRadioactivedecay-V10-02-00)
  o Fixes for Doxygen documentation.
- extended/runAndEvent/RE05 (exampleRE05-V10-02-00)
  o Renamed RE05CalorimeterROGeometry in E05CalorimeterParallelWorld.
  o Fixes for Doxygen documentation and coding guidelines.

tests                                            tests-V10-02-07
-----
- Updated reference outputs and tools.
- test19 (test19-V10-02-03)
  o Minor cleanup.
- test23 (test23-V10-02-07)
  o Fixed error in HARP 12GeV/c p+C -> pi+ dataset.
  o Minor cleanup in analysis scripts and scripts to generate json specs.
  o Refine details related to migration to Root6.
- tests/test30 (test30-V10-02-02)
  o Use modifided interface to G4DeexPrecoParameters.
- tests/test46 (test46-V10-02-01)
  o FTFPCMS_BERT_EMM, CMSEmStandardPhysicsHcal: added new CMS physics-list.
  o HistoManager: increased number of channels for ECAL energy deposit and R9.
- test47 (test47-V10-02-06)
  o Add both Cu and Pb targets to test47p.itep.Mu2e.
  o Updated ITEPModels.C and scripts to generate ITEP771 json specs.
  o Added/refined configs & production scripts.
- tests/test48 (test48-V10-02-01)
  o Completed migration of analysis scripts to Root6.
- tests/test65 (test65-V10-02-04)
  o Fixed data download error by enabling fall back to local server download.
