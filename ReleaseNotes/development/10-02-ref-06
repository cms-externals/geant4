
                       geant4-10-02-ref-06
                       ===================

Major development/fixes included since the last development tag are:

 o Set CLHEP-2.3.3.0 as the required version for external CLHEP library.
 o Added new stepper classes and FSAL classes for field integration.
 o G4UrbanMscModel: use new lateral displacement algorithm in opt-3 and opt-4
   physics-lists.
 o Fine tuning of G4LundStringFragmentation for FTF model, important for a
   description of NA49 experimental data on pp-interactions at 158 GeV/c.
 o G4PhotonEvaporation, G4RadioactiveDecay: rationalised initialisation of
   atomic de-excitation.
 o New experimental physics-list FTFP_BERT_ATL, similar to FTFP_BERT but
   with the transition between BERT and FTFP in the energy region [9, 12]
   GeV. Meant to reduce jet energy scale difference observed in ATLAS.
 o Updated data sets G4RadioactiveDecay-4.4.1 and G4ENSDFSTATE-1.3.1.

---------- Reference-tag 'Release Notes' -----------

(*)  Fixes included in release 10.2.p02
(o)  Fixes included in release 10.2.p03

Summarised, the list of changes is the following:

cmake                                            cmake-V10-02-17
-----
- Set CLHEP-2.3.3.0 as the required version for external CLHEP library.
- Updated to data sets G4RadioactiveDecay-4.4.1 and G4ENSDFSTATE-1.3.1.

config                                           config-V10-02-04
------
- Updated History file.

analysis                                         analysis-V10-02-05          (o)
--------
- Updated to g4tools 1.27.4:
  o Fixed compilation warnings on Windows-64.
  o See History_tools for the complete list of modifications.

geometry
--------
- magneticfield (field-V10-02-21):
  o Added new stepper classes embedded RK method: DoLoMcPriRK34 (6-stage
    3/4 RK, interpolation), DormandPrinceRK56 (9-stage 5/6 RK, interpolation,
    FSAL-able) and DormandPrinceRK78 (13-stage 7/8 RK, interpolation).
  o Added TsitourasRK45 stepper. 
  o First version of FSAL classes: FSAL Integrator Driver (concrete,
    stand-alone driver); FSAL Integrator Stepper (base class);
    FBogackiShampine45 (FSAL-version of BogackiShampine45 stepper);
    FDormandPrince745 (FSAL-version of FDormandPrince745 stepper).
  o G4MagIntegratorStepper: added counter for calls to equation RHS, 
    with Get/Reset() methods.
  o G4HelixMixedStepper: fixes and added new (5th order) stepper choices.
  o Fix in G4CashKarp for the size of arrays holding intermediate values.
- management (geommng-V10-02-13):
  o Introduced G4BoundingEnvelope helper class to be used for the calculation
    of the extent of a solid within the limits defined by the G4VoxelLimits
    object.
  o Re-implemented CalculateExtent() in G4ReflectedSolid to use new class
    G4BoundingEnvelope.
  o G4G4ScaleTransform: simplified signatures in TransformDistance() and
    in InverseTransformDistance(); make use of accessors.
  o Corrected treatment of polyhedron for G4ReflectedSolid to avoid thread
    contention.
- solids/Boolean (geom-bool-V10-02-08):
  o Reimplemented CalculateExtent() in G4ScaledSolid to use new class
    G4BoundingEnvelope. Use accessors in implementation.
  o Corrected treatment of polyhedron for G4DiplacedSolid and G4ScaledSolid
    to avoid thread contention.
  o Added warning in G4BooleanSolid::GetPointOnSurface() in case of non
    convergence after fixed number of trials.
    Fixed Coverity defects for uninitialised data.

global                                           global-V10-02-15
------
- Enabled new units 'us' and 'ps'. Now requiring CLHEP-2.3.3.0 as external
  CLHEP library.
- Updated version ID for 10.3-Beta.

interfaces                                       interfaces-V10-02-02
----------
- Fix for Qt driver for position of 'OK' button.                             (*)
- Fixed compilation warnings on MacOS for conversion to char* in G4UIXm.     (*)
- Fixed compilation warnings in G4UIWin32 for Windows.                       (*)

materials                                        materials-V10-02-12
---------
- G4DensityEffectData, G4IonisParamMat: fixed density effect parameters
  corrections for the case when NIST mean ionisation potential is not equal
  to that parameter in Shternheimer table.
- G4NistElementBuilder, G4NistMaterialBuilder: added access to the mean
  ionisation potential; put liquid water in front of the list of NIST
  materials (index=0), so pure materials can be easier accessed via atomic
  number (Z > 0).

parameterisations/gflash                         gflash-V10-02-00            (*)
------------------------
- Added missing inclusion of header in G4VGFlashSensitiveDetector.
  Addressing problem report #1867.

physics_lists
-------------
- constructors/decay (phys-ctor-decay-V10-02-02)
  o Added G4UnknownDecayPhysics constructor.
  o G4RadioactiveDecayPhysics: enabled atomic de-excitation by the call
    to EM parameters in ConstructProcess() method.
- constructors/electromagnetic (phys-ctor-em-V10-02-20)
  o G4EmModelActivator: fixed activation of DNA models.
    Use Uehara model with chemistry. Corrected elastic process name for ions.
  o G4EmDNAPhysics: load G4EmParameters.
  o G4EmDNAPhysics_option7: corrected 'preproc' flag.
- constructors/hadron_elastic (phys-ctor-helastic-V10-02-01)                 (*)
  o Made G4HadronElasticPhysicsPHP constructor thread-safe.
- constructors/hadron_inelastic (phys-ctor-hinelastic-V10-02-02)             (*)
  o G4HadronPhysicsQGSP_BIC_AllHP: treating only proton with ParticleHP;
    moved the others (deuteron, triton, 3He, alpha) to new class
    G4IonPhysicsPHP.
- constructors/ions (phys-ctor-ions-V10-02-00)                               (*)
  o Added G4IonPhysicsPHP constructor class.
- lists (phys-lists-V10-02-06)
  o New experimental physics-list FTFP_BERT_ATL, similar to FTFP_BERT but    (*)
    with the transition between BERT and FTFP in the energy region [9, 12]
    GeV. Meant to reduce jet energy scale difference observed in ATLAS.
  o QGSP_BIC_AllHP : use new, specialized ion constructor, G4IonPhysicsPHP.  (*)
  o Moved code to be inline in G4RegisterPhysLists so that it gets compiled
    as part of the G4PhysListRegistry compilation unit. This ensures that all
    the physics lists declared to the registry are referenced by it such that
    the linker will include them if libraries are built statically.

processes/biasing/management                     proc-biasmng-V10-02-01
----------------------------
- Checked for unbounded while loop in G4ProcessPlacer.

processes/decay                                  decay-V10-02-01
---------------
- Added better diagnostics in exception in G4Decay::DecayIt().

processes/electromagnetic/dna                    emdna-V10-02-25
-----------------------------
- G4DNAScreenedRutherfordElasticModel: modified handling of energy boundaries
  at init time. Deprecated SetKillBelowThreshold() method; modified
  initialisation to prevent erasing/rewriting data.
- G4DNAChampionElasticModel: rearranged declaration of attributes.
- G4DNAUeharaScreenedRutherfordElasticModel: added exception at init time if 
  model is used for anything other than e-.
- G4DNAChemistryManager: reversed logic in CreateWaterMolecule()
  for interface with physics models.
- G4DNAChampionElasticModel.cc: reset check ekin >= LowEnergyLimit().
  Added missing computation of 'sigma'.

processes/electromagnetic/highenergy             emhighenergy-V10-02-00
------------------------------------
- Use C++11 features explicit, override, delete, nullptr.

processes/electromagnetic/muons                  emmuons-V10-02-04
-------------------------------
- Use C++11 features explicit, override, delete, nullptr.

processes/electromagnetic/polarisation           empolar-V10-02-04
--------------------------------------
- G4PolarizedCompton, G4eplusPolarizedAnnihilation, G4ePolarisedIonisation: in
  PostStepGPIL(), use cached values of 'currentInteractionLength'; fixes
  problem at boundaries where updated value was incorrectly used.
- Use C++11 features nullptr and range-based for loop in G4PolarizationManager.

processes/electromagnetic/standard               emstand-V10-02-22
----------------------------------
- G4UrbanMscModel: use new lateral displacement algorithm in opt-3 and opt-4
  physics-lists.
- G4SeltzerBergerModel: fixed data handling for Z > 92.
  Addressing problem report #1870, about invalid read of data in run time.
- G4eBremsstrahlungRelModel: change LPM constant such that it gives
  suppression variable consistent with Migdal's one; fixes small issue in
  LPM function computation.

processes/electromagnetic/utils                  emutils-V10-02-23
-------------------------------
- G4EmModelManager: reviewed and fixed model configuration for DNA physics.
- G4DummyModel: set default low-enegry limit to 0 (needed for DNA).
- G4VMultipleScattering: added method NumberOfModels().
- G4VEmModel: fixed destruction in MT mode.
- G4VMultipleScattering, G4EmModelManager, G4LossTableManager: improved
  debug printout
- G4VAtomicDeexcitation: extended printout at initialisation.
- G4EmConfigurator: minor cleanup.

processes/electromagnetic/xrays                  xrays-V10-02-04
-------------------------------
- Use C++11 features explicit, override, delete, nullptr.

processes/hadronic
------------------
- management (hadr-man-V10-02-01)
  o G4HadronicProcess: added flag for "integral" approach to take into
    account cross-section change at a step. Do not create new materials
    in GetElementCrossSection(), just try to find existing simple G4Material
    ones instead. Adopt C++11 keyword nullptr.
- models/de_excitation (hadr-deex-V10-02-30)
  o G4PhotonEvaporation: rationalised initialisation in case radioactive decay
    initialisation is incomplete, no effect on hadron inelastic interactions.
  o G4DeexPrecoParameters, G4NuclearLevelData, G4ExcitationHandler,
    G4PhotonEvaporation: fixed initialisation in MT mode if physics-list 
    has only radioactive decay.
- models/management (hadr-modman-V10-02-03)
  o Updated History file.
- models/particle_hp (hadr-hpp-V10-02-17)
  o Fixed bug in usage of G4Nucleus::GetBiassedThermalNucleus().             (*)
  o Fix for calculation of residual A and Z, affecting results for           (*)
    charged particle projectiles. Addressing problem report #1815.
  o Bug fix in sampling of kinematic energy of scattered particle in         (*)
    DiscreteTwoBody. Addressing problem report #1815.
  o Fixed Coverity defects.                                                  (*)
  o Change default option of GNUmake script; G4PHPDEBUG flag was
    unintentionally activated.
- models/parton_string/diffraction (hadr-string-diff-V10-02-04)
  o Introduced various <Pt^2> for diffractive and non-diffractive interactions
    in G4FTFModel, for NA49 and NA61/SHINE experimental data.
  o Fine tuning in G4DiffractiveExcitation for the FTF model, to describe NA49
    experimental data, especially, <Pt> on Xf.
- models/parton_string/hadronization (had-hadronization-V10-02-05)
  o Fix to address the baryon puzzle of NA49 data; <Pt> of baryons 1/2 at a
    string fragmentation setting up at 435 MeV/c, and <Pt> for barion 3/2
    production st 900 MeV/c.
  o Fine tuning of G4LundStringFragmentation. <Pt> of mesons created at 
    quark fragmentation is decreased. <Pt> of baryons created at quark and
    di-quark is increased. Corrected fragmentation functions of qq-> B(1/2)
    and B(3/2). <Pt^2> is increased in 2 times.
    Important for a description of NA49 experimental data on pp-interactions
    at 158 GeV/c, especially for xF and Pt distributions.
- models/radioactive_decay (radioactive_decay-V10-02-07)
  o G4RadioactiveDecay: in BuildPhysicsTable(), removed initialization of
    atomic de-excitation to avoid overwriting its initialization in EM.
    Throw fatal exception if initialization not done somewhere.
    Initialisation should be now done in physics-lists.
- models/util (hadr-mod-util-V10-02-05)
  o Fixed Coverity defect in G4Fragment.

run                                              run-V10-02-12
---
- G4AdjointSimManager: correction in the use of run actions to avoid 
  infinite loop during an adjoint simulation.
- G4AdjointPrimaryGenerationAction: removed 3 times splitting of primary
  adjoint gamma.
- Fixed default process ordering parameters for G4UnknownDecay that
  should not have AtRest in G4PhysicsListHelper.

visualization                                    vis-V10-02-03
-------------
- management (visman-V10-02-13):
  o Introduced UI command /vis/viewer/interpolate.
  o Added some calls to SetView for security.
- gMocren (gMocren-V10-02-01):
  o Fixed compilation warning on Win64.                                      (*)
- OpenGL (opengl-V10-02-06):
  o Fixed bug in picking output text.
  o G4OpenGLXViewer: Added thread awareness regarding glXMakeCurrent.
- OpenInventor (openinventor-V10-02-03):
  o Fixed dispatching.
  o Fixed setting of transparency type (SoGLRenderAction::SORTED_OBJECT_ADD).
  o Fixed Coverity defects.

data sets:
---------
- G4ENSDFSTATE-1.3.1:
  o Added  missing data for AC225, SI25, 193RN, TE140.
+ G4RadioactiveDecay-4.4.1:
  o Added KM coefficients for e- capture and taken from DDEP data.
  o Correction to Fe55
  o Corrected 0 lifetime for Ac225.

examples                                         examples-V10-02-06
--------
- Updated reference outputs.
- advanced/microelectronics (microelectronics-V10-02-01)
  o Fixed multiple-scattering definition in PhysicsList.
- advanced/underground_physics (DMX-V10-02-00)
  o DMXPhysicsList: migrated EM physics to G4EmParameters.
- extended/electromagnetic/TestEm1 (testem1-V10-02-04)
  o Added decayinfly.mac macro.
  o Modified colors in vis.mac.
- extended/electromagnetic/TestEm7 (testem7-V10-02-02)
  o Fix in c2_functions.
- extended/medical/dna/clustering (clustering-V10-02-00)
  o Added GNUmakefile and reference output.
- extended/medical/dna/dnaphysics (dnaphysics-V10-02-02)
  o Added flagProcess value for electron capture.
  o DetectorConstructor, DetectorMessenger: ensure that geometry is created
    once; material may be changed for next runs.
  o SteppingAction: added label for solvation.
  o Added 2nd argument in SteppingAction for number of threads.
  o /run/initialise moved from code to macro.
  o DNA physics configuration moved from code to macro.
- extended/medical/dna/microdosimetry (microdosimetry-V10-02-01)
  o Increase cuts of G4ElectronCapture to 7.4 eV to remain compatible
    with the energy validity of the Champion's elastic model.
- extended/parallel/ThreadsafeScorers (ThreadsafeScorers-V10-02-02)
  o Corrected GNUmakefile.
- extended/radioactivedecay/rdecay01 (rdecay01-V10-02-07)
  o Initialize atomic de-excitation in PhysicsList::ConstructProcess()
    instead of in G4RadioactiveDecay to avoid overwriting initializtion in EM.
  o Set world size to 2 cm and gun direction along X.
- extended/runAndEvent (exRunAndEvent-V10-02-00)
  o Updated READMEs.
- extended/runAndEvent/RE01 (exampleRE01-V10-02-01)
  o Removed obsolete use of readout geometry.
  o Added protection against a track sticking on the calorimeter inner
    boundary.
  o Use G4UnknownDecayPhysics constructor and removed ad-hoc physics-list.

tests                                            tests-V10-02-06
-----
- Updated reference outputs and tools.
- tests/test18 (test18-V10-02-01)
  o Tst18RunAction: uncommented summary printout but limit it by only 20
    secondaries.
  o Tst18PhysicsList: use G4EmStandardPhysics, G4DecayPhysics 
    and G4RadioactiveDecayPhysics builders instead of obsolete
    custom code. Enabled Auger electron production for radioactive 
    decay.
  o Moved run initialisation from code to input macros.
- test19 (test19-V10-02-02)
- test23 (test23-V10-02-05)
  o Start using DbReader to extract NA49 integrated spectra for benchmarking.
  o Migration to Root6 for analysis scripts.
- test47 (test47-V10-02-04)
  o Migration to Root6 for analysis scripts.
- tests/test60 (test60-V10-02-00)
  o PhysicsList: added G4DNAElectronSolvation.
- tests/test75 (test75-V10-02-01)
  o Migration to Root6 for analysis scripts.
